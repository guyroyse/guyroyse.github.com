<aside class="site blog">

  {% for post in site.posts %}

    {% unless post.next %}
      <h1>{{ post.date | date: '%Y' }}</h1>
      <ul>
    {% else %}
      {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
      {% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
      {% if year != nyear %}
        </ul>
        <h1>{{ post.date | date: '%Y' }}</h1>
        <ul>
      {% endif %}
    {% endunless %}

    <li><div class="post-date">{{ post.date | date: '%b' }}</div><div class="post-title"><a href="{{ post.url }}">{{ post.title }}</a></div></li>

  {% endfor %}

  </ul>

</aside>
